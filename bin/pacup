#!/bin/bash
# <===========================================>
# @license LinuxShss
# bin/pacup
#
# Copyright (c) 2024, TheWisker.
#
# This source code is licensed under the GNU license found in the
# LICENSE file in the root directory of this source tree.
# <===========================================>

#   ██████╗  █████╗  ██████╗██╗   ██╗██████╗ 
#   ██╔══██╗██╔══██╗██╔════╝██║   ██║██╔══██╗
#   ██████╔╝███████║██║     ██║   ██║██████╔╝
#   ██╔═══╝ ██╔══██║██║     ██║   ██║██╔═══╝ 
#   ██║     ██║  ██║╚██████╗╚██████╔╝██║     
#   ╚═╝     ╚═╝  ╚═╝ ╚═════╝ ╚═════╝ ╚═╝                                          

# <===========================================>
#              @Author: TheWisker
# <===========================================>
#  Script that updates the system with a title
# <===========================================>
#  [Variables] Title & Separator & Colors:
# <===========================================>
title="
  ██╗   ██╗██████╗ ██████╗  █████╗ ████████╗███████╗
  ██║   ██║██╔══██╗██╔══██╗██╔══██╗╚══██╔══╝██╔════╝
  ██║   ██║██████╔╝██║  ██║███████║   ██║   █████╗  
  ██║   ██║██╔═══╝ ██║  ██║██╔══██║   ██║   ██╔══╝  
  ╚██████╔╝██║     ██████╔╝██║  ██║   ██║   ███████╗
   ╚═════╝ ╚═╝     ╚═════╝ ╚═╝  ╚═╝   ╚═╝   ╚══════╝
"
# <===========================================>
separator="<====================================================>"
# <===========================================>
color_off='\033[0m'
color_black='\033[1;30m'
color_red='\033[1;31m'
color_green='\033[1;32m'
color_yellow='\033[1;33m'
color_blue='\033[1;34m'
color_purple='\033[1;35m'
color_cyan='\033[1;36m'
color_white='\033[1;37m'
# <===========================================>
#  [Functions] Input & Output:
# <===========================================>
# Get some input in a formatted way
# <===========================================>
input () {
	local color="color_$3"
	echo -ne "${!color}${2}"
	read "$1"
	[[ "${4}" != "!" ]] && output $separator cyan !
	return 0
}
# <===========================================>
# Display some formatted output
# <===========================================>
output () {
	local color="color_$2"
	echo -e "${!color}${1}${color_off}"
	[[ "${3}" != "!" ]] && output $separator cyan !
	return 0
}
# <===========================================>
#  [Sequential] Pacup body:
# <===========================================>
output "" off
output "$title" purple
# <===========================================>
input confirm ">> Do you wish to proceed with the update? [y/N]: " cyan
if [[ "$confirm" != "y" ]]; then
    output "\n$ Update aborted!" red !
    exit 0
fi
# <===========================================>
sudo pacman -Syu
# <===========================================>
output "" off
# <===========================================>